
@model CommitteeAdministration.Areas.UM.ViewModels.UserViewModel
@{
    Layout = null;
}
@*<link href="~/Content/plugin/chosen/chosen.css" rel="stylesheet" />*@

@*<form id="SaveUserForm" method="post" action="~/Management/management/SaveUser">
    <div class="container-fluid" style="direction: rtl">
        <div id="frmUser">
            @Html.Partial("_partialuserinfo")
        </div>

    </div>
</form>*@


@using (Ajax.BeginForm("SaveUser", new { Controller = "Manage", area = "UM" }, new AjaxOptions() { HttpMethod = "POST", InsertionMode = InsertionMode.Replace, UpdateTargetId = "frmUser" }, new { @id = "SaveUserForm" }))
{
    <div class="container-fluid" style="direction: rtl">
        <div id="frmUser">
            @Html.Partial("_partialuserinfo")
        </div>

    </div>


}





@*<div class="row" style="direction: rtl">
        <div class="col-sm-3" style="float: right; padding-top: 10px">
            <select name="ParentID" id="cbxParentID" onchange="LoadDepartments(this.value)" class="chosen-select chosen-rtl chzn_a span7" style="margin-top: 10px; height: 34px; width:100%;">
                <option value="">-----</option>
                @foreach (var item in Model.CategoryList)
                {
                    if (item.Key != Model.Category.ID)
                    {
                        <option value="@(item.Key)" @(Model.Category.ParentID == item.Key ? "selected=selected" : "")>@(item.Value)</option>
                    }
                }
            </select>
        </div>
    </div>*@
@*<div class="row" style="direction: rtl">

        <div class="col-sm-6" style="float: right">
            <div class="input-group" style="margin-top: 10px;">
                <span class="input-group-addon">ایمیل</span>
                <input name="Email" id="txtEmail" type="text" class="form-control" placeholder="ایمیل" value="@Model.Name"/>
            </div>
        </div>

        <div class="col-sm-6" style="float: right">
            <div class="input-group" style="margin-top: 10px;">
                <span class="input-group-addon">رمز عبور</span>
                <input name="Password" id="txtPassword" type="password" class="form-control" placeholder="رمز عبور" value="@Model.FamilyName"/>
            </div>
        </div>

        <div class="col-sm-6" style="float: right">
            <div class="input-group" style="margin-top: 10px;">
                <span class="input-group-addon">تایید رمز عبور</span>
                <input name="Password" id="txtConfirmPassword" type="password" class="form-control" placeholder="نام خانوادگی" value="@Model.FamilyName" />
            </div>
        </div>

    </div>

    <div class="row" style="direction: rtl">

        <div class="col-sm-6" style="float: right">
            <div class="input-group" style="margin-top: 10px;">
                <span class="input-group-addon">نام</span>
                <input name="Name" id="txtName" type="text" class="form-control" placeholder="نام" value="@Model.Name"/>
            </div>
        </div>

        <div class="col-sm-6" style="float: right">
            <div class="input-group" style="margin-top: 10px;">
                <span class="input-group-addon">نام خانوادگی</span>
                <input name="LatinName" id="txtLatinName" type="text" class="form-control" placeholder="نام خانوادگی" value="@Model.FamilyName"/>
            </div>
        </div>

    </div>

    <div class="row" style="direction: rtl">

        <div class="col-sm-6" style="float: right">
            <div class="input-group" style="margin-top: 10px;">
                <span class="input-group-addon">نام</span>
                <input name="Name" id="txtName" type="text" class="form-control" placeholder="نام" value="@Model.Name" />
            </div>
        </div>

        <div class="col-sm-6" style="float: right">
            <div class="input-group" style="margin-top: 10px;">
                <span class="input-group-addon">نام خانوادگی</span>
                <input name="LatinName" id="txtLatinName" type="text" class="form-control" placeholder="نام خانوادگی" value="@Model.FamilyName" />
            </div>
        </div>

    </div>*@
<script src="~/Content/plugins/bootstrap-validator/bootstrapValidator.min.js"></script>
<script src="~/Content/plugins/bootstrap-validator/fa_IR.js"></script>
<script>


    $(document)
        .ready(function () {
            $('#SaveUserForm')
                .bootstrapValidator({
                   //live: 'disabled',
                    submitButton: '$SaveUserForm button[type="submit]',
                    submitHandler: function (validatior, form, submitButton) {
                        $.ajax({
                            url: "/InsertAchievements",
                            method: "post",
                            data: $('#SaveUserForm').serialize(),
                            dataType: "json",
                            success: function (data) {
                                $('#message_show').text("success");
                                $("#SaveUserForm").data('bootstrapValidator').resetForm();
                                $("#SaveUserForm")[0].reset();
                            }
                        });
                        return false;
                    },
                    feedbackIcons: {
                        valid: 'glyphicon glyphicon-ok',
                        invalid: 'glyphicon glyphicon-remove',
                        validating: 'glyphicon glyphicon-refresh'
                    },

                    fields: {
                        Name: {
                            validators: {
                                notEmpty: {}

                            }
                        },

                        FamilyName: {
                            validators: {
                                notEmpty: {}

                            }
                        },
                        CommitteeName: {
                            validators: {
                                notEmpty: {}
                            }
                        },
                        //complainantid: {
                        //    validators: {
                        //        notEmpty: {},
                        //        stringLength: {
                        //            min: 8
                        //        }
                        //    }
                        //},
                        //complainantname: {
                        //    validators: {
                        //        notEmpty: {},
                        //        stringLength: {
                        //            min: 6,
                        //            max: 30
                        //        }
                        //    }
                        //},
                        //username: {
                        //    validators: {
                        //        notEmpty: {},
                        //        stringLength: {
                        //            min: 6,
                        //            max: 20
                        //        },
                        //        regexp: {
                        //            regexp: /^[a-zA-Z0-9_\.]+$/
                        //        },
                        //        remote: {
                        //            url: 'remote.php',
                        //            message: 'Tên tài khoản này đã được đăng ký'
                        //        },
                        //        different: {
                        //            field: 'password',
                        //            message: 'The username and password cannot be the same as each other'
                        //        }
                        //    }
                        //},
                        Email: {
                            validators: {
                                notEmpty: {},
                                emailAddress: {}
                            }
                        },
                        Password: {
                            validators: {
                                notEmpty: {},
                                stringLength: {
                                    min: 6,
                                    max: 30
                                }
                            }
                        }
                        //address: {
                        //    validators: {
                        //        notEmpty: {}
                        //    }

                        //},
                        //eventdate: {
                        //    validators: {
                        //        notEmpty: {
                        //        },
                        //        date: {
                        //            format: 'YYYY/MM/DD'
                        //        }
                        //    }
                        //},

                        //tel: {
                        //    validators: {
                        //        notEmpty: {}
                        //    }
                        //},
                        //mobile: {
                        //    validators: {
                        //        notEmpty: {},
                        //        digits: {}

                        //    }
                        //}
                    }
                }).on('success.form.bv', function(e) {
                    // Prevent form submission
                    console.log("salam guzu");
                    e.preventDefault();
                    // Get the form instance
                    var $form = $(e.target);
                    // Get the BootstrapValidator instance
                    var bv = $form.data('bootstrapValidator');
                    // Use Ajax to submit form data
                    console.log(bv);
                    $.post($form.attr('action'), $form.serialize(), function(result) {
                        console.log(result);
                    }, 'json');
                });
        });


</script>
